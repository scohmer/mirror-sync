# debian-12.Containerfile
FROM debian:12-slim

RUN apt-get update && apt-get install -y apt-mirror ca-certificates \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/*

# Create mount point
RUN mkdir -p /srv/apt/debian/deb.debian.org/debian

# Copy build script
COPY build-and-sync.sh /usr/local/bin/sync-debian-mirror.sh
RUN chmod +x /usr/local/bin/sync-debian-mirror.sh

VOLUME ["/srv/apt/debian/deb.debian.org/debian"]

ENTRYPOINT ["/usr/local/bin/sync-debian-mirror.sh"]
